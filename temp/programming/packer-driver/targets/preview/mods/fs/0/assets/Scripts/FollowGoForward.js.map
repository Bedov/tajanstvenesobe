{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/FollowGoForward.ts"],"names":["_decorator","Component","Vec3","ccclass","property","FollowGoForward","start","setTarget","targetObject","update","deltaTime","distanca","worldPosition","subtract","node","length","console","log","destroyObject","vecTemp","FORWARD","position","add","calculateForward","destroy","multiplyQuatVec3","rotation","point","num1","x","num2","y","num3","z","num4","num5","num6","num7","num8","num9","num10","w","num11","num12","vector3","sila","vectorForward","multiplyScalar"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Vec3, Quat } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = FollowGoForward\r\n * DateTime = Fri Jan 21 2022 15:42:52 GMT+0100 (Central European Standard Time)\r\n * Author = stickandrope\r\n * FileBasename = FollowGoForward.ts\r\n * FileBasenameNoExtension = FollowGoForward\r\n * URL = db://assets/Scripts/FollowGoForward.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\r\n *\r\n */\r\n \r\n@ccclass('FollowGoForward')\r\nexport class FollowGoForward extends Component {\r\n    \r\n    targetObject? : Node; \r\n\r\n    start () {\r\n    } \r\n\r\n    setTarget(targetObject : Node) {\r\n\r\n        this.targetObject = targetObject;\r\n    }\r\n\r\n    update (deltaTime: number) {\r\n\r\n        var distanca : number = new Vec3 ( this.targetObject!.worldPosition.subtract(this.node.worldPosition) ).length() ;\r\n        console.log(\"Distanca \" + distanca);\r\n        \r\n\r\n        if( distanca < 0.01 )\r\n            this.destroyObject();\r\n\r\n        var vecTemp: Vec3 = new Vec3(Vec3.FORWARD);\r\n        this.node.position = this.node.position.add(this.calculateForward(0.1) );\r\n     }\r\n\r\n     destroyObject() {\r\n         this.node.destroy();\r\n     }\r\n\r\n     multiplyQuatVec3(rotation: Quat, point: Vec3)\r\n    {\r\n      var num1: number = rotation.x * 2;\r\n      var num2: number  = rotation.y * 2;\r\n      var num3: number  = rotation.z * 2;\r\n      var num4: number  = rotation.x * num1;\r\n      var num5: number  = rotation.y * num2;\r\n      var num6: number  = rotation.z * num3;\r\n      var num7: number  = rotation.x * num2;\r\n      var num8: number  = rotation.x * num3;\r\n      var num9: number  = rotation.y * num3;\r\n      var num10: number  = rotation.w * num1;\r\n      var num11: number  = rotation.w * num2;\r\n      var num12: number  = rotation.w * num3;\r\n      var vector3: Vec3 = new Vec3;\r\n      vector3.x = ((1.0 - ( num5 +  num6)) *  point.x + ( num7 -  num12) *  point.y + ( num8 +  num11) *  point.z);\r\n      vector3.y = (( num7 +  num12) *  point.x + (1.0 - ( num4 +  num6)) *  point.y + ( num9 -  num10) *  point.z);\r\n      vector3.z = (( num8 -  num11) *  point.x + ( num9 +  num10) *  point.y + (1.0 - ( num4 +  num5)) *  point.z);\r\n      return vector3;\r\n    }\r\n\r\n\r\n    calculateForward(sila: number) {\r\n        var vectorForward = this.multiplyQuatVec3(this.node.rotation, Vec3.FORWARD);\r\n        vectorForward.y = 0;\r\n        \r\n        return vectorForward.multiplyScalar(sila);\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}