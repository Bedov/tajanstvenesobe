{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/RemoteScripts/JSONloader.ts"],"names":["JSONtask2","JSONtask1","JSONobject","JSONquestTekst","JSONimage","_decorator","Component","assetManager","AudioClip","SpriteFrame","Texture2D","GameManager","ccclass","property","tasksInProgress","JSONloader","onLoad","gameManager","node","getComponent","fetchQuestions","folderURL","taskJSON","expectedQuestions","remoteUrlRoot","originUrl","LanguageName","LevelName","index","Number","questionURL","toString","returnQuestion","pop","returnQuestionInput","downloadInProgress","audioURL","loadRemote","err","textAsset","parsedJSON","JSON","parse","question","tacanOdgovor","undefined","audioClip","questionAudio","error","console","log","audioIsLoaded","remoteUrl","tempTask","netacanOdgovor1","netacanOdgovor2","push","update","getInstance","downloadedCheckpoint","instance","taskInProgressManager","fetchQuestTekst","questURL","tekstObject","quest","questAudio","fetchImageQuestTekst","imageObject","rootURL","fetchedImage","spriteFrame","texture","image","questImage","constructor","type","tacanOdgovorAudio"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, JsonAsset, assetManager, Game, AudioClip, AudioSource, SpriteFrame, ImageAsset, Texture2D, Sprite, game} from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n//const fs = require('fs');\r\n//import{  fs} from 'fs-extra';\r\n//https://docs.cocos.com/creator/3.1/manual/en/asset/dynamic-load-resources.html\r\n\r\n/**\r\n * Predefined variables\r\n * Name = JSONloader\r\n * DateTime = Fri Nov 26 2021 15:46:48 GMT+0100 (Central European Standard Time)\r\n * Author = stickandrope\r\n * FileBasename = JSONloader.ts\r\n * FileBasenameNoExtension = JSONloader\r\n * URL = db://assets/Scripts/RemoteScripts/JSONloader.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n\r\n//var static instance: JSONloader;\r\nvar tasksInProgress = 0;\r\n\r\n \r\nimport { GameManager } from \"../GameManager\";\r\nimport { GlobalManager } from '../GlobalManager';\r\nimport { Task } from '../Tasks/Task';\r\n\r\n@ccclass('JSONloader')\r\nexport class JSONloader extends Component {\r\n    \r\n    gameManager? : GameManager ;\r\n    downloadTask: number = 0;\r\n\r\n    downloadInProgress = false;\r\n\r\n    public downloadedCheckpoint = -1;\r\n\r\n    originUrl = \"https://stickandrope.com/klett/json\"; \r\n    //originUrl = \"http://abedov.com/json\"; \r\n\r\n    onLoad(){\r\n\r\n        this.gameManager = this.node.getComponent(GameManager)!;\r\n\r\n        //   \r\n        \r\n    }\r\n\r\n\r\n    fetchQuestions(folderURL: String, taskJSON: Array<JSONtask1>, expectedQuestions: Number) {\r\n\r\n        let remoteUrlRoot = this.originUrl + \"/\" + this.gameManager?.LanguageName + \"/\" + this.gameManager?.LevelName + \"/\" + folderURL + \"/\" ;\r\n\r\n\r\n        for (let index = 1; index < Number(expectedQuestions) + 1; index++) {\r\n            //console.log(\"URL: \" + remoteUrlRoot + index.toString() + \".txt\");\r\n            var questionURL = remoteUrlRoot + index.toString() + \".txt\";\r\n\r\n            if(!this.returnQuestion(remoteUrlRoot, questionURL, taskJSON, index)) {\r\n                taskJSON.pop();\r\n                \r\n                index = 13;\r\n            }\r\n                \r\n        }\r\n    }\r\n\r\n    returnQuestionInput(questionURL: String, taskJSON: JSONtask2) {\r\n        this.downloadInProgress = true;\r\n\r\n        let remoteUrlRoot = this.originUrl + \"/\" + this.gameManager?.LanguageName + \"/\" + this.gameManager?.LevelName + \"/\" + questionURL;\r\n        var audioURL = this.originUrl + \"/\" + this.gameManager?.LanguageName + \"/\" + this.gameManager?.LevelName + \"/\";\r\n\r\n        try {\r\n            tasksInProgress++;\r\n\r\n             assetManager.loadRemote(remoteUrlRoot.toString(), function (err, textAsset) {\r\n\r\n                 try {\r\n                    var parsedJSON = JSON.parse(textAsset.toString());\r\n                    taskJSON.question = parsedJSON[\"question\"];\r\n                    taskJSON.tacanOdgovor = parsedJSON[\"tacanOdgovor\"];\r\n                    \r\n                    \r\n                    \r\n                    if( parsedJSON[\"questionAudio\"] != undefined)  {\r\n\r\n                        try {\r\n                            tasksInProgress++;\r\n                            assetManager.loadRemote<AudioClip>(audioURL + parsedJSON[\"questionAudio\"], (AudioClip), (err, audioClip) =>  {\r\n                                taskJSON.questionAudio =  audioClip ;\r\n                                tasksInProgress--;\r\n                            });\r\n                            \r\n                        } catch (error) {\r\n                            console.log(\"Zvuk nije dobro ucitan\");\r\n                            taskJSON.audioIsLoaded = false;\r\n                        } \r\n                    } else \r\n                        console.log(\"Ne postoje zvukovi za ovu putanju\");\r\n\r\n                    tasksInProgress--;\r\n                } catch (error) {\r\n                    console.log(\"Nisam nasao trazeno polje za parsiranje\" + error );\r\n                    return false;\r\n                }console.log(\" BITNOOO  \" + taskJSON.questionAudio);\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.log(\"Nisam nasao trazenu adresu za parsiranje 2\" + error );\r\n            return false;\r\n        }\r\n        \r\n\r\n    }\r\n\r\n    returnQuestion(remoteUrlRoot: string, questionURL: string, taskJSON: Array<JSONtask1>, index : number) {\r\n        this.downloadInProgress = true;\r\n        \r\n        let remoteUrl = this.originUrl + \"/\" + this.gameManager?.LevelName  + \"/\" + this.gameManager?.LanguageName + \"/\" + questionURL + \".txt\";\r\n\r\n        try {\r\n\r\n             assetManager.loadRemote(questionURL, function (err, textAsset) {\r\n\r\n                 try {\r\n                    tasksInProgress++;\r\n                    var tempTask = new JSONtask1;\r\n                    var parsedJSON = JSON.parse(textAsset.toString());\r\n                    tempTask.question = parsedJSON[\"question\"];\r\n                    tempTask.tacanOdgovor = parsedJSON[\"tacanOdgovor\"];\r\n                    \r\n                    if(parsedJSON[\"netacanOdgovor1\"] != undefined) {\r\n                        tempTask.netacanOdgovor1 = parsedJSON[\"netacanOdgovor1\"];\r\n                        tempTask.netacanOdgovor2 = parsedJSON[\"netacanOdgovor2\"];\r\n                    }                    \r\n                    \r\n                    if( parsedJSON[\"questionAudio\"] != undefined)  {\r\n\r\n                        try {\r\n                            tasksInProgress++;\r\n                            assetManager.loadRemote<AudioClip>(remoteUrlRoot + parsedJSON[\"questionAudio\"], (AudioClip), (err, audioClip) =>  {\r\n                                tempTask.questionAudio =  audioClip ;\r\n                                tasksInProgress--;\r\n                            });\r\n\r\n                        } catch (error) {\r\n                            console.log(\"Zvuk nije dobro ucitan\");\r\n                            tempTask.audioIsLoaded = false;\r\n                        } \r\n                    } else \r\n                        console.log(\"Ne postoje zvukovi za ovu putanju\");\r\n                        \r\n                    \r\n                    if(tempTask.question != undefined)\r\n                        taskJSON.push(tempTask);\r\n\r\n                    tasksInProgress--;\r\n                } catch (error) {\r\n                    console.log(\"Nisam nasao trazeno polje za parsiranje\" + error );\r\n                    return false;\r\n                }\r\n            });\r\n            return true;\r\n        } catch (error) {\r\n            console.log(\"Nisam nasao trazenu adresu za parsiranje 2\" + error );\r\n            return false;\r\n        }\r\n        \r\n\r\n    }\r\n    update() {\r\n        if( this.downloadInProgress == true && tasksInProgress == 0) {\r\n            this.downloadInProgress = false;\r\n            GameManager.getInstance().downloadedCheckpoint++;\r\n        }\r\n\r\n        GameManager.instance.taskInProgressManager = Number( tasksInProgress);\r\n        \r\n    }\r\n\r\n    fetchQuestTekst(questURL: string, tekstObject: JSONquestTekst) {\r\n        this.downloadInProgress = true;\r\n\r\n        let remoteUrlRoot = this.originUrl + \"/\" + this.gameManager?.LanguageName + \"/\" + this.gameManager?.LevelName + \"/\" + questURL ;\r\n        var audioURL = this.originUrl + \"/\" + this.gameManager?.LanguageName + \"/\" + this.gameManager?.LevelName + \"/\";\r\n        //let questURLfull = remoteUrlRoot \r\n\r\n        try {\r\n\r\n            tasksInProgress++;\r\n            assetManager.loadRemote(remoteUrlRoot, function (err, textAsset) {\r\n\r\n                try {\r\n\r\n                   var parsedJSON = JSON.parse(textAsset.toString());\r\n\r\n                   tekstObject.quest = parsedJSON[\"quest\"];\r\n                   \r\n                   if( parsedJSON[\"questAudio\"] != undefined)  {\r\n                        \r\n                       try {\r\n                            tasksInProgress++;\r\n                           assetManager.loadRemote<AudioClip>(audioURL + parsedJSON[\"questAudio\"], (AudioClip), (err, audioClip) =>  {\r\n                            tekstObject.questAudio =  audioClip ;\r\n                            tasksInProgress--;\r\n                           });\r\n                        \r\n                       } catch (error) {\r\n                           console.log(\"Zvuk nije dobro ucitan\");\r\n                           tekstObject.audioIsLoaded = false;\r\n                       } \r\n                   } else \r\n                       console.log(\"Ne postoje zvukovi za ovu putanju\");\r\n\r\n\r\n                    tasksInProgress--;\r\n               } catch (error) {\r\n                   console.log(\"Nisam nasao trazeno polje za parsiranje\" + error );\r\n                   return false;\r\n               }\r\n           });\r\n           return true;\r\n       } catch (error) {\r\n           console.log(\"Nisam nasao trazenu adresu za parsiranje 2\" + error );\r\n           return false;\r\n       }\r\n    }\r\n\r\n    \r\n    fetchImageQuestTekst(questURL: string, imageObject: JSONimage) {\r\n        this.downloadInProgress = true;\r\n\r\n        let remoteUrlRoot = this.originUrl + \"/\" + this.gameManager?.LanguageName + \"/\" + this.gameManager?.LevelName + \"/\" + questURL ;\r\n        var rootURL = this.originUrl + \"/\" + this.gameManager?.LanguageName + \"/\" + this.gameManager?.LevelName + \"/\";\r\n        //let questURLfull = remoteUrlRoot \r\n\r\n        try {\r\n            tasksInProgress++;\r\n            assetManager.loadRemote(remoteUrlRoot, function (err, textAsset) {\r\n\r\n                try {\r\n\r\n                   var parsedJSON = JSON.parse(textAsset.toString());\r\n\r\n                   imageObject.quest = parsedJSON[\"quest\"];\r\n                   \r\n                   if( parsedJSON[\"questAudio\"] != undefined)  {\r\n\r\n                       try {\r\n                            tasksInProgress++;\r\n                           assetManager.loadRemote<AudioClip>(rootURL + parsedJSON[\"questAudio\"], (AudioClip), (err, audioClip) =>  {\r\n                            imageObject.questAudio =  audioClip ;\r\n                            tasksInProgress--;\r\n                           });\r\n                        \r\n                       } catch (error) {\r\n                           console.log(\"Zvuk nije dobro ucitan\");\r\n                           imageObject.audioIsLoaded = false;\r\n                       } \r\n                   } else \r\n                       console.log(\"Ne postoje zvukovi za ovu putanju\");\r\n\r\n\r\n                    if( parsedJSON[\"questImage\"] != undefined)  {\r\n\r\n                        try {\r\n                            assetManager.loadRemote<ImageAsset>(rootURL + parsedJSON[\"questImage\"], (err, fetchedImage) =>  {\r\n                                console.log(\"Sta skidam \" + rootURL + parsedJSON[\"questImage\"]);\r\n                                \r\n                                const spriteFrame = new SpriteFrame();\r\n                                const texture = new Texture2D();\r\n                                texture.image = fetchedImage;\r\n                                spriteFrame.texture = texture;\r\n                                imageObject.questImage = spriteFrame ;\r\n                            });\r\n                         \r\n                        } catch (error) {\r\n                            console.log(\"Slika nije dobro ucitana\");\r\n                            imageObject.audioIsLoaded = false;\r\n                        } \r\n                    } else \r\n                        console.log(\"Ne postoji slika za ovu putanju\");\r\n\r\n                    tasksInProgress--;\r\n               } catch (error) {\r\n                   console.log(\"Nisam nasao trazeno polje za parsiranje\" + error );\r\n                   return false;\r\n               }\r\n           });\r\n           return true;\r\n       } catch (error) {\r\n           console.log(\"Nisam nasao trazenu adresu za parsiranje 2\" + error );\r\n           return false;\r\n       }\r\n\r\n       \r\n    }\r\n\r\n    \r\n    \r\n}\r\n\r\nexport class JSONtask2 {\r\n    \r\n    type?: string;\r\n    question?: string;\r\n    questionAudio? : AudioClip;\r\n    tacanOdgovor?: string;\r\n    tacanOdgovorAudio? : AudioClip;\r\n\r\n    audioIsLoaded? : boolean;\r\n\r\n    constructor( ) {\r\n        this.type = \"\";\r\n        this.question = \"\";\r\n        this.questionAudio = undefined;\r\n        this.tacanOdgovor = \"\";\r\n        this.tacanOdgovorAudio = undefined;\r\n\r\n        this.audioIsLoaded = true;\r\n    }\r\n\r\n}\r\n\r\nexport class JSONtask1 {\r\n    \r\n    type?: string;\r\n    question?: string;\r\n    questionAudio? : AudioClip;\r\n    tacanOdgovor?: string;\r\n    tacanOdgovorAudio? : AudioClip;\r\n    netacanOdgovor1?: string;\r\n    netacanOdgovor1Audio? : AudioClip;\r\n    netacanOdgovor2?: string;\r\n    netacanOdgovor2Audio? : AudioClip;\r\n    audioIsLoaded? : boolean;\r\n\r\n    constructor( ) {\r\n        this.type = \"\";\r\n        this.question = \"\";\r\n        this.questionAudio = undefined;\r\n        this.tacanOdgovor = \"\";\r\n        this.tacanOdgovorAudio = undefined;\r\n        this.netacanOdgovor1 = \"\";\r\n        this.netacanOdgovor1 = undefined;\r\n        this.netacanOdgovor2 = \"\";\r\n        this.netacanOdgovor2 = undefined;\r\n        this.audioIsLoaded = true;\r\n    }\r\n\r\n}\r\nexport class JSONobject {\r\n    quest?: string;\r\n    questImage?: SpriteFrame;\r\n    questAudio? : AudioClip;\r\n    audioIsLoaded? : boolean;\r\n\r\n    constructor( ) {\r\n        this.quest = undefined;\r\n        this.questImage = undefined;\r\n        this.questAudio = undefined;\r\n        this.audioIsLoaded = true;\r\n    }\r\n}\r\n\r\nexport class JSONquestTekst extends JSONobject{\r\n    \r\n    quest?: string;\r\n\r\n    constructor( ) {\r\n        super();\r\n        this.quest = \"\";\r\n    }\r\n}\r\n\r\nexport class JSONimage extends JSONobject {\r\n    \r\n    quest?: string;\r\n    questImage?: SpriteFrame;\r\n\r\n\r\n    constructor( ) {\r\n        super();\r\n        this.quest = \"\";\r\n        this.questImage = undefined;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}