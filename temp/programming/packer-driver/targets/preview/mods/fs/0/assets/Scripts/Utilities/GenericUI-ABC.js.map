{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Utilities/GenericUI-ABC.ts"],"names":["_decorator","Component","Node","Label","AudioSource","randomRangeInt","Animation","Task","ScriptEffects","TaskABCquestion","GameManager","GameStatuType","ccclass","property","GenericUIABC","start","node","children","forEach","element","name","soundParent","push","element2","audioSource","getComponent","getChildByName","undefined","ScriptableFromWrong","solveSoundActivness","JSONtask","questionAudio","active","turningOff","findThisSoundAndPlay","stringName","tacanOdgovor","tacanOdgovorAudio","playOneShot","netacanOdgovor1","netacanOdgovor1Audio","netacanOdgovor2","netacanOdgovor2Audio","soundButtonClicked","event","customData","parseInt","A","string","B","C","answered","rightAnwer","wrongAnswer","corespondingTask","taskCompleted","turnOffGenericTask","play","setRandomTask","putAnwersInPlace","nizOdgovora","Array","randomizeAnswers","nizStringova","izlazniNiz","lengthTemp","length","index","izabraniRandomIndex","splice","turnOnGenericTask","task","getInstance","gameStatus","gamePaused","fadeInActive","console","log","getRandomTask","genericTekst","question","gameActive","fadeOutActive"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Label, EventHandler, random, AudioSource, randomRangeInt, ButtonComponent, Button, Animation} from 'cc';\r\nimport { Task } from '../Tasks/Task';\r\nimport { ScriptEffects } from './ScriptEffects';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = GenericUI\r\n * DateTime = Wed Nov 17 2021 22:41:36 GMT+0100 (Central European Standard Time)\r\n * Author = stickandrope\r\n * FileBasename = GenericUI.ts\r\n * FileBasenameNoExtension = GenericUI\r\n * URL = db://assets/Scripts/Utilities/GenericUI.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n import { JSONloader } from \"../RemoteScripts/JSONloader\";\r\n import { JSONtask1 } from \"../RemoteScripts/JSONloader\";\r\nimport { TaskABCquestion } from '../Tasks/TaskABCquestion';\r\nimport { GameManager, GameStatuType } from '../GameManager';\r\n \r\n@ccclass('GenericUI-ABC')\r\nexport class GenericUIABC extends Component {\r\n    \r\n    JSONtask!: JSONtask1;\r\n\r\n    @property(Node)\r\n    genericTekst!: Node;\r\n\r\n    @property(Node)\r\n    A!: Node;\r\n\r\n    @property(Node)\r\n    B!: Node;\r\n\r\n    @property(Node)\r\n    C!: Node;\r\n\r\n    soundParent?: Node[] = [];\r\n\r\n\r\n    private audioSource: AudioSource = null!;\r\n\r\n    ScriptableFromWrong? : ScriptEffects;\r\n    corespondingTask? : Node;\r\n    correctAnswer? : Number;\r\n\r\n    turningOff = false;\r\n\r\n    start () {\r\n        this.node.children.forEach(element => {\r\n            if(element.name == \"Aaudio\" || element.name == \"Baudio\" || element.name == \"Caudio\" || element.name == \"QuestionAudio\") \r\n                this.soundParent?.push(element);\r\n            \r\n                element.children.forEach(element2 => {\r\n                    if(element2.name == \"Aaudio\" || element2.name == \"Baudio\" || element2.name == \"Caudio\" || element2.name == \"QuestionAudio\") \r\n                        this.soundParent?.push(element2);\r\n            });\r\n        });\r\n\r\n\r\n        this.audioSource = this.node.getComponent(AudioSource)!;\r\n\r\n        if(this.node.getChildByName(\"Wrong\") != undefined && this.node.getChildByName(\"Wrong\") != null)\r\n            this.ScriptableFromWrong =  this.node.getChildByName(\"Wrong\")!.getComponent(ScriptEffects)! ;\r\n    }\r\n\r\n    solveSoundActivness() {\r\n       // this.soundParent = this.node.getChildByName(\"SoundButtons\")! ;\r\n\r\n        if(this.JSONtask.questionAudio == undefined || this.JSONtask.questionAudio == null)\r\n            this.soundParent!.forEach(element => {\r\n                element.active = false;\r\n            });\r\n            \r\n        else\r\n            this.soundParent!.forEach(element => {\r\n                element.active = true;\r\n            });\r\n\r\n        this.turningOff = false;\r\n    }\r\n\r\n    findThisSoundAndPlay(stringName : string) {\r\n        switch (stringName) {\r\n            case this.JSONtask.tacanOdgovor:\r\n                if(this.JSONtask.tacanOdgovorAudio != undefined)\r\n                    this.audioSource.playOneShot(this.JSONtask.tacanOdgovorAudio!, 1);\r\n                break;\r\n            case this.JSONtask.netacanOdgovor1:\r\n                if(this.JSONtask.netacanOdgovor1Audio != undefined)\r\n                    this.audioSource.playOneShot(this.JSONtask.netacanOdgovor1Audio!, 1);\r\n            \r\n                break;\r\n            case this.JSONtask.netacanOdgovor2:\r\n                if(this.JSONtask.netacanOdgovor2Audio != undefined)\r\n                    this.audioSource.playOneShot(this.JSONtask.netacanOdgovor2Audio!, 1);\r\n            \r\n            break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    soundButtonClicked(event: Event, customData: string) {\r\n        switch (parseInt(customData)) {\r\n            case 0:\r\n                this.findThisSoundAndPlay(this.A.getComponent(Label)!.string);\r\n                break;\r\n            case 1:\r\n                this.findThisSoundAndPlay(this.B.getComponent(Label)!.string);\r\n                break;\r\n            case 2:\r\n                this.findThisSoundAndPlay(this.C.getComponent(Label)!.string);\r\n                break;\r\n            case 3:\r\n                if(this.JSONtask.questionAudio != undefined)\r\n                    this.audioSource.playOneShot(this.JSONtask.questionAudio!, 1);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    answered(event: Event, customData: string) {\r\n            switch (parseInt(customData)) {\r\n                case 0:\r\n                    if(this.A.getComponent(Label)!.string == this.JSONtask.tacanOdgovor)\r\n                        this.rightAnwer();\r\n                    else \r\n                        this.wrongAnswer();\r\n                    break;\r\n                case 1:\r\n                    if(this.B.getComponent(Label)!.string == this.JSONtask.tacanOdgovor)\r\n                        this.rightAnwer();\r\n                    else \r\n                        this.wrongAnswer();\r\n                    break;\r\n                case 2:\r\n                    if(this.C.getComponent(Label)!.string == this.JSONtask.tacanOdgovor)\r\n                        this.rightAnwer();\r\n                    else \r\n                        this.wrongAnswer();\r\n                break;\r\n                default:\r\n                    break;\r\n            }\r\n        \r\n    }\r\n\r\n    rightAnwer() {\r\n        this.corespondingTask?.getComponent(Task)?.taskCompleted();\r\n \r\n        this.turnOffGenericTask();\r\n        this.turningOff = true;\r\n        \r\n    }\r\n\r\n    wrongAnswer() {\r\n        this.node.getComponent(Animation)!.play(\"WrongNudge\");\r\n\r\n        this.setRandomTask();\r\n\r\n    }\r\n\r\n    putAnwersInPlace () {\r\n        var nizOdgovora = new Array<string>();\r\n        nizOdgovora[0] = this.JSONtask.tacanOdgovor!;\r\n        nizOdgovora[1] = this.JSONtask.netacanOdgovor1!;\r\n        nizOdgovora[2] = this.JSONtask.netacanOdgovor2!;\r\n\r\n        nizOdgovora = this.randomizeAnswers(nizOdgovora);\r\n\r\n        this.A.getComponent(Label)!.string = nizOdgovora[0];\r\n        this.B.getComponent(Label)!.string = nizOdgovora[1];\r\n        this.C.getComponent(Label)!.string = nizOdgovora[2];\r\n    }\r\n\r\n    randomizeAnswers(nizStringova: string[]) {\r\n        var izlazniNiz = new Array<string>(); //   [nizStringova.length];\r\n        var lengthTemp = nizStringova.length;\r\n\r\n        for (let index = 0; index < lengthTemp; index++) {\r\n            var izabraniRandomIndex = randomRangeInt(0, nizStringova.length);\r\n            izlazniNiz[index] =  nizStringova[ izabraniRandomIndex ] ;\r\n            nizStringova.splice(izabraniRandomIndex, 1);    \r\n        }\r\n\r\n        return izlazniNiz;\r\n\r\n    }\r\n\r\n    turnOnGenericTask(task: Node) {\r\n        this.corespondingTask = task; \r\n        GameManager.getInstance().gameStatus = GameStatuType.gamePaused; \r\n        \r\n        this.getComponent(ScriptEffects)?.fadeInActive();\r\n        console.log(\"!!!! USAO OVDE SAM! \");\r\n        \r\n\r\n        this.setRandomTask();\r\n\r\n    }\r\n\r\n    setRandomTask() {\r\n        this.JSONtask = this.corespondingTask!.getComponent(TaskABCquestion)!.getRandomTask();\r\n        this.genericTekst.getComponent(Label)!.string = this.JSONtask.question!;\r\n\r\n        this.putAnwersInPlace ();\r\n        this.solveSoundActivness();\r\n    }\r\n\r\n    turnOffGenericTask() {\r\n        GameManager.getInstance().gameStatus = GameStatuType.gameActive; \r\n\r\n        this.getComponent(ScriptEffects)?.fadeOutActive();\r\n        //this.ScriptableFromWrong?.fadeOutActive();\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}