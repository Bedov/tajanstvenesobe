{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Goldberg/ButtonColorsLogic.ts"],"names":["_decorator","Component","Node","Material","MeshRenderer","Vec3","GlobalManager","LevelButtonClicked","ccclass","property","ButtonColorsLogic","start","buttonsArray","push","node","getChildByName","schedule","checkTutorialEnd","setSceneNamesToButtons","getInstance","activeLevelData","getLevelProgress","refreshColors","findGeneralProgress","levelArray","levelsArray","index","length","getComponent","levelName","String","sceneName","progress","setPolugaPosition","element","setMaterial","lockedMaterial","lockedButton","finishedMaterial","Number","unlockedMaterial","polugaTutorial","setPosition","getPosition","x","z","lockAllButtons","forEach"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, find, Material, Mesh, MeshRenderer, Button, Vec2, Vec3 } from 'cc';\nimport { globalInformations, GlobalManager, levelStatus } from '../GlobalManager';\nimport { LevelButtonClicked } from '../UI/LevelButtoClicked';\nconst { ccclass, property } = _decorator;\n \n@ccclass('ButtonColorsLogic')\nexport class ButtonColorsLogic extends Component {\n\n    @property(Material)\n    lockedMaterial?: Material ;\n\n    @property(Material)\n    unlockedMaterial?: Material ;\n\n    @property(Material)\n    finishedMaterial?: Material ;\n\n    @property(Node)\n    polugaTutorial?: Node ;\n\n    button1? : Node; \n    button2? : Node; \n    button3? : Node; \n    button4? : Node; \n    button5? : Node; \n\n    buttonsArray : Array<Node> = [];\n\n\n    start () {\n\n\n        this.buttonsArray!.push(this.node.getChildByName(\"1\")!);\n        this.buttonsArray!.push(this.node.getChildByName(\"2\")!);\n        this.buttonsArray!.push(this.node.getChildByName(\"3\")!);\n        this.buttonsArray!.push(this.node.getChildByName(\"4\")!);\n        this.buttonsArray!.push(this.node.getChildByName(\"5\")!);\n\n        this.schedule(this.checkTutorialEnd,0.5);\n        \n\n        this.setSceneNamesToButtons();\n    }\n\n\n    checkTutorialEnd(){\n        if( GlobalManager.getInstance().activeLevelData.getLevelProgress() != 0 ) {\n            this.refreshColors( GlobalManager.getInstance().findGeneralProgress());\n            //this.unscheduleAllCallbacks();\n        }\n    }\n\n\n\n    setSceneNamesToButtons() {\n        var levelArray = GlobalManager.getInstance().levelsArray;\n\n        for (let index = 0; index < levelArray.length; index++) {\n            \n            this.buttonsArray[index].getComponent(LevelButtonClicked)!.levelName = String (levelArray[index].sceneName);\n        }\n\n        \n    }\n\n    refreshColors(progress: Number) {\n        \n        this.setPolugaPosition(progress);\n\n        for (let index = 0; index < this.buttonsArray.length; index++) {\n            const element = this.buttonsArray[index].getComponent(MeshRenderer)!.setMaterial(this.lockedMaterial!, 0);\n        }\n\n        for (let index = 0; index < progress; index++) {\n            this.buttonsArray[index].getComponent(LevelButtonClicked)!.lockedButton = false;\n            const element = this.buttonsArray[index].getComponent(MeshRenderer)!.setMaterial(this.finishedMaterial!, 0);\n        }\n\n        if( progress < this.buttonsArray.length) {\n            this.buttonsArray[Number(progress)].getComponent(LevelButtonClicked)!.lockedButton = false;\n            this.buttonsArray[Number(progress)].getComponent(MeshRenderer)!.setMaterial(this.unlockedMaterial!, 0);\n        }\n    }\n\n    setPolugaPosition(progress: Number) {\n        switch (progress) {\n            case 0:\n                this.polugaTutorial?.setPosition(new Vec3(this.polugaTutorial.getPosition().x, 11.648 , this.polugaTutorial.getPosition().z));\n                break;\n            case 1:\n                this.polugaTutorial?.setPosition(new Vec3(this.polugaTutorial.getPosition().x, 10.848 , this.polugaTutorial.getPosition().z));\n                break;\n            case 2:\n                this.polugaTutorial?.setPosition(new Vec3(this.polugaTutorial.getPosition().x, 10.018 , this.polugaTutorial.getPosition().z));\n                break;\n            case 3:\n                this.polugaTutorial?.setPosition(new Vec3(this.polugaTutorial.getPosition().x, 9.268 , this.polugaTutorial.getPosition().z));\n                break;\n            case 4:\n                this.polugaTutorial?.setPosition(new Vec3(this.polugaTutorial.getPosition().x, 8.428 , this.polugaTutorial.getPosition().z));\n                break;\n            default:\n                this.polugaTutorial?.setPosition(new Vec3(this.polugaTutorial.getPosition().x, 10.108 , this.polugaTutorial.getPosition().z));\n                break;\n        }\n    }\n\n    lockAllButtons() {\n        this.buttonsArray.forEach(element => {\n            element.getComponent(LevelButtonClicked)!.lockedButton = true;\n        });\n    }\n\n    // update (deltaTime: number) {\n    //     // [4]\n    // }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}