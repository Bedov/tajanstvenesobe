{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Utilities/ScriptEffects.ts"],"names":["_decorator","Component","UIOpacity","ccclass","property","ScriptEffects","Number","Boolean","onLoad","defaultOff","node","active","getComponent","opacity","fadeOutActive","_fadeOutBool","_fadeInBool","fadeInActive","fadeOut","time","_fadeOutCounterMax","fadeIn","update","deltaTime","_fadeOutCounter","_fadeInCounter"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Sprite, UIOpacity, UI} from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = ScriptEffects\r\n * DateTime = Tue Nov 16 2021 13:22:00 GMT+0100 (Central European Standard Time)\r\n * Author = stickandrope\r\n * FileBasename = ScriptEffects.ts\r\n * FileBasenameNoExtension = ScriptEffects\r\n * URL = db://assets/Scripts/Utilities/ScriptEffects.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n \r\n@ccclass('ScriptEffects')\r\nexport class ScriptEffects extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    _fadeOutBool = false;\r\n    _fadeOutEffect = true;\r\n    _fadeOutCounter = 0.4;\r\n\r\n    _fadeInBool = false;\r\n    _fadeInEffect = true;\r\n    _fadeInCounter = 0;\r\n\r\n\r\n    @property(Number)\r\n    _fadeOutCounterMax = 0.4;\r\n\r\n    //_fadeOutCounterMax = 1;\r\n\r\n    @property(Boolean) \r\n    defaultOff?: Boolean = true;\r\n\r\n\r\n    onLoad (){ \r\n        if(this.defaultOff) {\r\n            this.node.active = false;\r\n            this.node.getComponent(UIOpacity)!.opacity = 0;\r\n        }\r\n    }\r\n\r\n    fadeOutActive() {\r\n        //this._fadeOutCounter = this._fadeOutCounterMax; \r\n            \r\n\r\n        this._fadeOutBool = true;\r\n        this._fadeInBool = false;\r\n    }\r\n    fadeInActive() {\r\n        \r\n\r\n        this.node.active = true;\r\n        this._fadeInBool = true;\r\n        this._fadeOutBool = false;\r\n\r\n        \r\n    }\r\n\r\n    fadeOut(time: number) {\r\n            \r\n            if(this.node.getComponent(UIOpacity) != null) \r\n                if( this.node.getComponent(UIOpacity)!.opacity >= time / this._fadeOutCounterMax * 255 && time / this._fadeOutCounterMax * 255 >= 0 ) {\r\n                    this.node.getComponent(UIOpacity)!.opacity =  time / this._fadeOutCounterMax * 255;\r\n                }\r\n    }\r\n\r\n    fadeIn(time: number) { \r\n       \r\n        this.node.active = true;\r\n        if(this.node.getComponent(UIOpacity) != null) \r\n            if( this.node.getComponent(UIOpacity)!.opacity <= time / this._fadeOutCounterMax * 255 && time / this._fadeOutCounterMax * 255 <= 255 ) {\r\n                this.node.getComponent(UIOpacity)!.opacity =  time / this._fadeOutCounterMax * 255;\r\n            } \r\n            \r\n    }\r\n\r\n\r\n    update (deltaTime: number) {\r\n        if(this._fadeOutBool) {\r\n            this._fadeOutCounter -= deltaTime;\r\n            this.fadeOut(this._fadeOutCounter);\r\n            if( this._fadeOutCounter < 0) {\r\n                this._fadeOutBool = false;\r\n                this._fadeOutCounter = this._fadeOutCounterMax;\r\n                this.node.active = false;\r\n            }\r\n        }\r\n        if(this._fadeInBool) {\r\n            this._fadeInCounter += deltaTime;\r\n            this.fadeIn(this._fadeInCounter);\r\n\r\n            if( this._fadeInCounter > this._fadeOutCounterMax) {\r\n                this._fadeInBool = false;\r\n                this._fadeInCounter = 0;\r\n            }\r\n        }\r\n            \r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}