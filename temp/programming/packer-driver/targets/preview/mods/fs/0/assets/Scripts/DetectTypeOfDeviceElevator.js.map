{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/DetectTypeOfDeviceElevator.ts"],"names":["_decorator","Component","systemEvent","SystemEvent","macro","GameManager","GameStatuType","GlobalManager","ccclass","property","KEYCODE","UP","KEY","up","DOWN","down","LEFT","left","RIGHT","right","SHIFT","shift","DetectTypeOfDeviceElevator","onLoad","scheduleOnce","startTutorial","endPretutoral","MobileMoveJoystick","node","getChildByName","_preTutorailEnded","getInstance","startProgress","_moveTutorialEndBool","_lookTutorialEndBool","on","EventType","KEY_DOWN","onKeyDown","KeyboardMoveSymbol","KeyboardSeeSymbol","MobileSeeSymbol","MobileMoveSymbol","setPlatform","start","setPlatformInitial","isMobileOrTablet","active","checkProgressForTutorial","_moveTimerBool","_lookdontRepeatTutorialEndevent","_lookTimerBool","onDestroy","off","e","keyCode","update","deltaTime","mobileSeeSymbole","getComponent","keyboardSeeSymbol","fadeOutActive","_movedontRepeatTutorialEndevent","keyboardMoveSymbol","_lookCounter","fadeInActive","_moveCounter","_tutorialEnded","gameStatus","gameActive","keyboard_Move","joystick_Mouse_Move"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, sys, systemEvent, SystemEvent, macro, KeyCode, UIOpacityComponent } from 'cc';\r\nimport { GameManager, GameStatuType } from './GameManager';\r\nimport { GlobalManager } from './GlobalManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = DetectTypeOfDevice\r\n * DateTime = Mon Nov 15 2021 18:42:05 GMT+0100 (Central European Standard Time)\r\n * Author = stickandrope\r\n * FileBasename = DetectTypeOfDevice.ts\r\n * FileBasenameNoExtension = DetectTypeOfDevice\r\n * URL = db://assets/Scripts/DetectTypeOfDevice.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n const KEYCODE = {\r\n    UP: macro.KEY.up,\r\n    DOWN: macro.KEY.down,\r\n    LEFT: macro.KEY.left,\r\n    RIGHT: macro.KEY.right,\r\n    SHIFT: macro.KEY.shift,\r\n}\r\n\r\n\r\nimport { ScriptEffects } from \"./Utilities/ScriptEffects\";\r\n \r\n@ccclass('DetectTypeOfDeviceElevator')\r\nexport class DetectTypeOfDeviceElevator extends Component {\r\n\r\n    KeyboardMoveSymbol!: Node;\r\n    MobileMoveJoystick!: Node;\r\n    KeyboardSeeSymbol!: Node;\r\n    MobileSeeSymbol!: Node;\r\n\r\n    MobileMoveSymbol!: Node;\r\n\r\n    _moveTimerBool = true;\r\n    _moveTutorialEndBool = false;\r\n    _movedontRepeatTutorialEndevent = false;\r\n    _moveCounter = 1;\r\n\r\n    _lookTimerBool = true;\r\n    _lookTutorialEndBool = false;\r\n    _lookdontRepeatTutorialEndevent = false;\r\n    _lookCounter = 0.2;\r\n\r\n    _tutorialEnded = false;\r\n    _preTutorailEnded = false;\r\n\r\n    onLoad() {\r\n        this.scheduleOnce(this.startTutorial, 5);\r\n        this.scheduleOnce(this.endPretutoral, 4);\r\n\r\n        this.MobileMoveJoystick = this.node.getChildByName(\"joystick\")!;\r\n    }\r\n\r\n    endPretutoral() {\r\n        this._preTutorailEnded = true;\r\n        if(GameManager.getInstance().startProgress != 0) {\r\n            this._moveTutorialEndBool = true;\r\n            this._lookTutorialEndBool = true;\r\n        }\r\n    }\r\n\r\n    startTutorial() {\r\n        systemEvent.on(SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        this.KeyboardMoveSymbol = this.node.getChildByName(\"DesktopMoveTutorial\")!;\r\n        this.KeyboardSeeSymbol = this.node.getChildByName(\"DesktopLookTutorial\")!;\r\n        this.MobileSeeSymbol = this.node.getChildByName(\"MobileLookTutorial\")!;\r\n        this.MobileMoveSymbol = this.node.getChildByName(\"MobileMoveTutorial\")!;\r\n\r\n        if(GameManager.getInstance().startProgress == 0) {\r\n            this.setPlatform();\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    start() {\r\n        \r\n        this.setPlatformInitial();\r\n\r\n    }\r\n\r\n    setPlatformInitial() {\r\n        \r\n        if(GlobalManager.getInstance().isMobileOrTablet) {\r\n            this.MobileMoveJoystick.active = true;\r\n        } else \r\n            this.MobileMoveJoystick.active = false;\r\n\r\n    }\r\n\r\n    setPlatform() {\r\n        \r\n        if(GlobalManager.getInstance().isMobileOrTablet) {\r\n            this.KeyboardMoveSymbol.active = false;\r\n            this.MobileMoveSymbol.active = true;\r\n            this.KeyboardSeeSymbol.active = false;\r\n            this.MobileSeeSymbol.active = true;\r\n        } else {\r\n            this.KeyboardMoveSymbol.active = true;\r\n            this.MobileMoveSymbol.active = false;\r\n            this.KeyboardSeeSymbol.active = true;\r\n            this.MobileSeeSymbol.active = false;\r\n        }\r\n    }\r\n\r\n    checkProgressForTutorial() {\r\n        //if(GlobalManager.getInstance().Progress != 0) {\r\n            this._moveTutorialEndBool = true;\r\n            this._moveTimerBool = false;\r\n            this._lookdontRepeatTutorialEndevent = true;\r\n            this._lookTimerBool = false;\r\n       //}\r\n    }\r\n\r\n    onDestroy(){\r\n        systemEvent.off(SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        //this.node.off(SystemEvent.EventType.TOUCH_MOVE, this.joystick_Mouse_Move, this); \r\n    }\r\n\r\n    onKeyDown(e: any) {\r\n        if(e.keyCode == KEYCODE.UP || e.keyCode == KEYCODE.LEFT || e.keyCode == KEYCODE.DOWN || e.keyCode == KEYCODE.RIGHT ) \r\n            this._moveTutorialEndBool = true;\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        if(this._preTutorailEnded == false)\r\n            return;\r\n\r\n        if(this._lookTutorialEndBool && this._lookdontRepeatTutorialEndevent == false) {\r\n            \r\n            var mobileSeeSymbole = this.MobileSeeSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n            var keyboardSeeSymbol = this.KeyboardSeeSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n\r\n            if(GlobalManager.getInstance().isMobileOrTablet)\r\n                mobileSeeSymbole.fadeOutActive();\r\n            else\r\n                keyboardSeeSymbol.fadeOutActive();\r\n\r\n            this._lookdontRepeatTutorialEndevent = true;\r\n        }\r\n\r\n        if(this._moveTutorialEndBool && this._movedontRepeatTutorialEndevent == false) {\r\n\r\n            var MobileMoveSymbol= this.MobileMoveSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n            var keyboardMoveSymbol = this.KeyboardMoveSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n\r\n            if(GlobalManager.getInstance().isMobileOrTablet)\r\n                MobileMoveSymbol.fadeOutActive();\r\n            else\r\n                keyboardMoveSymbol.fadeOutActive();\r\n            \r\n\r\n            this._movedontRepeatTutorialEndevent = true;\r\n        }\r\n\r\n        this._lookCounter -= deltaTime;\r\n\r\n        if(this._lookCounter < 0 && this._lookTimerBool == true && !this._lookTutorialEndBool) {\r\n            if(GlobalManager.getInstance().isMobileOrTablet) {\r\n                var mobileSeeSymbole = this.MobileSeeSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n                mobileSeeSymbole.fadeInActive();\r\n            }else {\r\n                var keyboardSeeSymbol = this.KeyboardSeeSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n                keyboardSeeSymbol.fadeInActive();\r\n\r\n            }\r\n            this._lookTimerBool = false;\r\n        }\r\n\r\n        if(this._lookTutorialEndBool) {\r\n            this._moveCounter -= deltaTime;\r\n        }\r\n\r\n\r\n\r\n        if(this._moveCounter < 0 && this._moveTimerBool == true && this._lookTutorialEndBool && !this._moveTutorialEndBool) {\r\n            if(GlobalManager.getInstance().isMobileOrTablet) {\r\n                var MobileMoveSymbol = this.MobileMoveSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n                MobileMoveSymbol.fadeInActive();\r\n            }else {\r\n                var KeyboardMoveSymbol = this.KeyboardMoveSymbol.getComponent('ScriptEffects') as ScriptEffects;\r\n                KeyboardMoveSymbol.fadeInActive();\r\n\r\n            }\r\n            this._moveTimerBool = false;\r\n        }\r\n\r\n        if(this._lookTutorialEndBool && this._moveTutorialEndBool && !this._tutorialEnded) {\r\n            \r\n            GlobalManager.getInstance().gameStatus = GameStatuType.gameActive; \r\n\r\n            this._tutorialEnded = true;\r\n        }\r\n\r\n\r\n        \r\n\r\n    }\r\n    keyboard_Move() {\r\n        if(!this._movedontRepeatTutorialEndevent && this._preTutorailEnded)\r\n            this._moveTutorialEndBool = true;\r\n    }\r\n\r\n    joystick_Mouse_Move() {\r\n        if(!this._lookdontRepeatTutorialEndevent && this._preTutorailEnded)\r\n            this._lookTutorialEndBool = true;\r\n    }\r\n    // update (deltaTime: number) {\r\n    //     // [4]\r\n    // }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}