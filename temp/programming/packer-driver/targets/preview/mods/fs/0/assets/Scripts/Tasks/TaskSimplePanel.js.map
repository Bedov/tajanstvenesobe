{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Tasks/TaskSimplePanel.ts"],"names":["_decorator","Collider","JSONquestTekst","GenericUI","Task","GameManager","ccclass","property","TaskSimplePanel","String","start","trigger","getComponent","on","taskReached","getTekstRemotely","remoteName","getInstance","jsonLoader","fetchQuestTekst","toString","tekstObject","event","otherCollider","node","name","requirementForTaskCompleted","executed","execute","isItOkToExecute","taskManager","genericUI","active","turnOnGenericTaskJSON","refreshExecutedTasks","parent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAuCC,MAAAA,Q,OAAAA,Q;;AAIvCC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OANH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;iCASjBQ,e,WADZF,OAAO,CAAC,iBAAD,C,UAGHC,QAAQ,CAACE,MAAD,C,oCAHb,MACaD,eADb;AAAA;AAAA,wBAC0C;AAAA;AAAA;;AAAA;;AAAA,+CAKR;AAAA;AAAA,iDALQ;AAAA;;AAOtCE,QAAAA,KAAK,GAAI;AACL,cAAIC,OAAO,GAAG,KAAKC,YAAL,CAAkBX,QAAlB,CAAd;;AACA,cAAIU,OAAJ,EAAa;AACTA,YAAAA,OAAO,CAACE,EAAR,CAAY,gBAAZ,EAA8B,KAAKC,WAAnC,EAAgD,IAAhD;AACH;;AACD,eAAKC,gBAAL;AACH;;AAEDA,QAAAA,gBAAgB,GAAG;AACf,cAAG,KAAKC,UAAL,IAAmB,EAAtB,EAA0B;AAAA;;AACtB;AAAA;AAAA,4CAAYC,WAAZ,GAA0BC,UAA1B,gFAAsCC,eAAtC,CAAsD,KAAKH,UAAL,CAAgBI,QAAhB,EAAtD,EAAkF,KAAKC,WAAvF;AACH;AACJ;;AAEDP,QAAAA,WAAW,CAAEQ,KAAF,EAAc;AACrB,cAAGA,KAAK,CAACC,aAAN,CAAoBC,IAApB,CAAyBC,IAAzB,IAAiC,QAApC,EAAgD;AAC5C,gBAAG,KAAKC,2BAAL,IAAoC,CAAC,KAAKC,QAA7C,EACI,KAAKC,OAAL;AAEP;AAGJ;;AAEDA,QAAAA,OAAO,GAAI;AAEP,cAAG,KAAKC,eAAL,EAAH,EAA2B;AACvB,iBAAKC,WAAL,CAAiBC,SAAjB,CAA4BC,MAA5B,GAAqC,IAArC;AACA,iBAAKF,WAAL,CAAiBC,SAAjB,CAA4BnB,YAA5B;AAAA;AAAA,wCAAqDqB,qBAArD,CAA2E,KAAKZ,WAAhF,EAFuB,CAEuE;;AAE9F,iBAAKM,QAAL,GAAgB,IAAhB;AACA,iBAAKG,WAAL,CAAiBI,oBAAjB,CAAsC,KAAKV,IAAL,CAAUW,MAAhD;AACH;AAEJ;;AAzCqC,O;;;;;;AA8C1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Component, Node, director, Collider } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\nimport { TaskManager } from \"./TaskManager\";\r\nimport { JSONquestTekst } from '../RemoteScripts/JSONloader';\r\nimport { GenericUI } from \"../Utilities/GenericUI\";\r\nimport { Task } from './Task';\r\nimport { GameManager } from '../GameManager';\r\n\r\n@ccclass('TaskSimplePanel')\r\nexport class TaskSimplePanel extends Task {\r\n\r\n    @property(String)\r\n    remoteName!: String;\r\n\r\n    tekstObject: JSONquestTekst = new JSONquestTekst ;\r\n\r\n    start () {\r\n        let trigger = this.getComponent(Collider);\r\n        if (trigger) { \r\n            trigger.on( \"onTriggerEnter\", this.taskReached, this);\r\n        }\r\n        this.getTekstRemotely();\r\n    }\r\n\r\n    getTekstRemotely() {\r\n        if(this.remoteName != \"\") {\r\n            GameManager.getInstance().jsonLoader?.fetchQuestTekst(this.remoteName.toString(), this.tekstObject)!;\r\n        }\r\n    }\r\n\r\n    taskReached (event: any) {\r\n        if(event.otherCollider.node.name == \"Player\" )  {\r\n            if(this.requirementForTaskCompleted && !this.executed) \r\n                this.execute();\r\n                \r\n        }\r\n            \r\n            \r\n    }\r\n\r\n    execute () {\r\n        \r\n        if(this.isItOkToExecute()) {\r\n            this.taskManager.genericUI!.active = true;\r\n            this.taskManager.genericUI!.getComponent(GenericUI)!.turnOnGenericTaskJSON(this.tekstObject); //Čestitam! Stigao si do časovničara.\r\n            \r\n            this.executed = true;\r\n            this.taskManager.refreshExecutedTasks(this.node.parent!);\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}