{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Utilities/GenericUI-Input.ts"],"names":["_decorator","Component","Node","Label","AudioSource","Animation","EditBoxComponent","Task","ScriptEffects","GameManager","GameStatuType","TaskInput","GlobalManager","ccclass","property","GenericUIinput","undefined","start","turnOffSoundButton","active","audioSource","node","getComponent","getChildByName","ScriptableFromWrong","setPCorMobileKeyboard","getInstance","isMobileOrTablet","typeInputResult","editBoxPC","solveSoundActivness","console","log","JSONtask","questionAudio","soundParent","turningOff","solveIntroTaskButton","string","getGlobal","goButton","soundButtonClicked","event","customData","playing","clip","play","stop","answered","tacanOdgovor","rightAnwer","wrongAnswer","rightAnwerAfterTheAnimation","corespondingTask","taskCompleted","clearStringFromEditBox","turnOffGenericTask","setRandomTask","turnOnGenericTask","task","gameStatus","gamePaused","fadeInActive","inputKeyboard","getRandomTask","genericTekst","question","gameActive","fadeOutActive","update"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAA6BC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAA0DC,MAAAA,gB,OAAAA,gB;;AACjIC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,a,iBAAAA,a;;AAgBAC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,a,iBAAAA,a;;AACbC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;OAjBH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBd,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;gCAQae,c,WADZF,OAAO,CAAC,iBAAD,C,UAKHC,QAAQ,CAACZ,IAAD,C,UAGRY,QAAQ,CAACZ,IAAD,C,oCARb,MACaa,cADb,SACoCd,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,+CAWrBe,SAXqB;;AAAA,+CAaP,IAbO;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,8CAqB7B,KArB6B;AAAA;;AAuB1CC,QAAAA,KAAK,GAAI;AACL,eAAKC,kBAAL,CAAwBC,MAAxB,GAAiC,IAAjC;AAEA,eAAKC,WAAL,GAAmB,KAAKC,IAAL,CAAUC,YAAV,CAAuBlB,WAAvB,CAAnB;AAEA,cAAG,KAAKiB,IAAL,CAAUE,cAAV,CAAyB,OAAzB,KAAqCP,SAArC,IAAkD,KAAKK,IAAL,CAAUE,cAAV,CAAyB,OAAzB,KAAqC,IAA1F,EACI,KAAKC,mBAAL,GAA4B,KAAKH,IAAL,CAAUE,cAAV,CAAyB,OAAzB,EAAmCD,YAAnC;AAAA;AAAA,6CAA5B;AAGJ,eAAKG,qBAAL;AACH;;AAEDA,QAAAA,qBAAqB,GAAE;AACnB,cAAG;AAAA;AAAA,0CAAYC,WAAZ,GAA0BC,gBAA7B,EAA+C;AAE3C,iBAAKN,IAAL,CAAUE,cAAV,CAAyB,SAAzB,EAAqCJ,MAArC,GAA8C,IAA9C;AACA,iBAAKE,IAAL,CAAUE,cAAV,CAAyB,WAAzB,EAAuCJ,MAAvC,GAAgD,KAAhD;AAEA,iBAAKS,eAAL,GAAuB,KAAKP,IAAL,CAAUE,cAAV,CAAyB,SAAzB,EAAqCA,cAArC,CAAoD,QAApD,EAA+DD,YAA/D,CAA4EnB,KAA5E,CAAvB;AAGH,WARD,MAQO;AACH,iBAAKkB,IAAL,CAAUE,cAAV,CAAyB,SAAzB,EAAqCJ,MAArC,GAA8C,KAA9C;AACA,iBAAKE,IAAL,CAAUE,cAAV,CAAyB,WAAzB,EAAuCJ,MAAvC,GAAgD,IAAhD;AAEA,iBAAKS,eAAL,GAAuB,KAAKP,IAAL,CAAUE,cAAV,CAAyB,WAAzB,EAAuCA,cAAvC,CAAsD,QAAtD,EAAiED,YAAjE,CAA8EnB,KAA9E,CAAvB;AACA,iBAAK0B,SAAL,GAAiB,KAAKR,IAAL,CAAUE,cAAV,CAAyB,WAAzB,EAAuCD,YAAvC,CAAoDhB,gBAApD,CAAjB;AACH;AACJ;;AAEDwB,QAAAA,mBAAmB,GAAG;AAClBC,UAAAA,OAAO,CAACC,GAAR,CAAY,8BAA8B,KAAKC,QAAL,CAAcC,aAAxD;AAEA,eAAKC,WAAL,GAAmB,KAAKd,IAAL,CAAUE,cAAV,CAAyB,cAAzB,CAAnB;AAIA,cAAG,KAAKU,QAAL,CAAcC,aAAd,IAA+BlB,SAA/B,IAA4C,KAAKiB,QAAL,CAAcC,aAAd,IAA+B,IAA9E,EACI,KAAKC,WAAL,CAAiBhB,MAAjB,GAA0B,KAA1B,CADJ,KAGI,KAAKgB,WAAL,CAAiBhB,MAAjB,GAA0B,IAA1B;AAEJ,eAAKiB,UAAL,GAAkB,KAAlB;AACH;;AAEDC,QAAAA,oBAAoB,GAAG;AACnB,eAAKhB,IAAL,CAAUE,cAAV,CAAyB,eAAzB,EAA2CA,cAA3C,CAA0D,OAA1D,EAAoED,YAApE,CAAiFnB,KAAjF,EAAyFmC,MAAzF,GAAkG;AAAA;AAAA,8CAAcC,SAAd,GAA0BC,QAA5H;AACH;;AAEDC,QAAAA,kBAAkB,CAACC,KAAD,EAAeC,UAAf,EAAmC;AACjD,cAAG,CAAC,KAAKvB,WAAL,CAAiBwB,OAArB,EAA8B;AAC1B,iBAAKxB,WAAL,CAAiByB,IAAjB,GAAwB,KAAKZ,QAAL,CAAcC,aAAtC;AACA,gBAAG,KAAKD,QAAL,CAAcC,aAAd,IAA+BlB,SAAlC,EACI,KAAKI,WAAL,CAAiB0B,IAAjB;AACP,WAJD,MAKI,KAAK1B,WAAL,CAAiB2B,IAAjB;AAGP;;AAEDC,QAAAA,QAAQ,CAACN,KAAD,EAAeC,UAAf,EAAmC;AAAA;;AAGvC,cAAG,+BAAKf,eAAL,gFAAsBU,MAAtB,KAAgC,KAAKL,QAAL,CAAcgB,YAAjD,EACI,KAAKC,UAAL,GADJ,KAGI,KAAKC,WAAL;AAEP;;AACDD,QAAAA,UAAU,GAAG;AAAA;;AACT,qCAAK5B,YAAL,CAAkBjB,SAAlB,2EAA8ByC,IAA9B,CAAmC,eAAnC;AAEH;;AAEDM,QAAAA,2BAA2B,GAAG;AAAA;;AAC1B,wCAAKC,gBAAL,0GAAuB/B,YAAvB;AAAA;AAAA,6GAA2CgC,aAA3C,GAD0B,CAE1B;;AACA,eAAKC,sBAAL;AACA,eAAKC,kBAAL;AACA,eAAKpB,UAAL,GAAkB,IAAlB;AAGH;;AAEDmB,QAAAA,sBAAsB,GAAG;AACrB,eAAK3B,eAAL,CAAsBU,MAAtB,GAA+B,EAA/B;AAEA,cAAG,KAAKT,SAAR,EACI,KAAKA,SAAL,CAAeS,MAAf,GAAwB,EAAxB;AACP;;AAEDa,QAAAA,WAAW,GAAG;AACV;AACA;AAEA,eAAK9B,IAAL,CAAUC,YAAV,CAAuBjB,SAAvB,EAAmCyC,IAAnC,CAAwC,YAAxC;AAEA,eAAKW,aAAL;AAEA,eAAKF,sBAAL;AAGH;;AAGDG,QAAAA,iBAAiB,CAACC,IAAD,EAAa;AAAA;;AAC1B,sCAAKrC,YAAL,CAAkBjB,SAAlB,6EAA8ByC,IAA9B,CAAmC,cAAnC;AAEA,eAAKO,gBAAL,GAAwBM,IAAxB;AACA;AAAA;AAAA,0CAAYjC,WAAZ,GAA0BkC,UAA1B,GAAuC;AAAA;AAAA,8CAAcC,UAArD;AAIA,sCAAKvC,YAAL;AAAA;AAAA,yHAAkCwC,YAAlC;AAEA,eAAKL,aAAL;AACA,eAAKpB,oBAAL;;AAGA,cAAG;AAAA;AAAA,0CAAYX,WAAZ,GAA0BC,gBAA7B,EAA+C;AAC3C;AAAA;AAAA,4CAAYD,WAAZ,GAA0BqC,aAA1B,CAAyC5C,MAAzC,GAAkD,IAAlD;AAEH;AAEJ;;AAEDsC,QAAAA,aAAa,GAAG;AACZ,eAAKxB,QAAL,GAAgB,KAAKoB,gBAAL,CAAuB/B,YAAvB;AAAA;AAAA,sCAAgD0C,aAAhD,EAAhB;AACA,eAAKC,YAAL,CAAkB3C,YAAlB,CAA+BnB,KAA/B,EAAuCmC,MAAvC,GAAgD,KAAKL,QAAL,CAAciC,QAA9D;AAEA,eAAKpC,mBAAL;AACH;;AAED0B,QAAAA,kBAAkB,GAAG;AAAA;;AACjB,cAAG,KAAKpC,WAAL,CAAiBwB,OAApB,EACI,KAAKxB,WAAL,CAAiB2B,IAAjB;AAEJ;AAAA;AAAA,0CAAYrB,WAAZ,GAA0BkC,UAA1B,GAAuC;AAAA;AAAA,8CAAcO,UAArD;AAEA;AAAA;AAAA,0CAAYzC,WAAZ,GAA0BqC,aAA1B,CAAyC5C,MAAzC,GAAkD,KAAlD;AAEA,sCAAKG,YAAL;AAAA;AAAA,yHAAkC8C,aAAlC,GARiB,CASjB;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL,cAAG,KAAKjD,WAAL,CAAiBwB,OAApB,EAA6B;AACzB,iBAAK1B,kBAAL,CAAwBC,MAAxB,GAAiC,IAAjC;AACH,WAFD,MAGK;AACD,iBAAKD,kBAAL,CAAwBC,MAAxB,GAAiC,KAAjC;AACH;AAGJ;;AAjLyC,O;;;;;;;;;;;AAoL9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Component, Node, Label, EventHandler, random, AudioSource, Animation, randomRangeInt, ButtonComponent, Button, Game, EditBoxComponent} from 'cc';\r\nimport { Task } from '../Tasks/Task';\r\nimport { ScriptEffects } from './ScriptEffects';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = GenericUI\r\n * DateTime = Wed Nov 17 2021 22:41:36 GMT+0100 (Central European Standard Time)\r\n * Author = stickandrope\r\n * FileBasename = GenericUI.ts\r\n * FileBasenameNoExtension = GenericUI\r\n * URL = db://assets/Scripts/Utilities/GenericUI.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n import { JSONloader } from \"../RemoteScripts/JSONloader\";\r\n import { JSONtask1 } from \"../RemoteScripts/JSONloader\";\r\nimport { GameManager, GameStatuType } from '../GameManager';\r\nimport { TaskInput } from '../Tasks/TaskInput';\r\nimport { GlobalManager } from '../GlobalManager';\r\n \r\n@ccclass('GenericUI-Input')\r\nexport class GenericUIinput extends Component {\r\n    \r\n    JSONtask!: JSONtask1;\r\n\r\n    @property(Node)\r\n    genericTekst!: Node;\r\n\r\n    @property(Node)\r\n    turnOffSoundButton!: Node;\r\n\r\n    editBoxPC? : EditBoxComponent;\r\n    soundParent?: Node = undefined;\r\n\r\n    private audioSource: AudioSource = null!;\r\n\r\n    ScriptableFromWrong? : ScriptEffects;\r\n    corespondingTask? : Node;\r\n    correctAnswer? : Number;\r\n\r\n    typeInputResult? : Label;\r\n\r\n    turningOff = false;\r\n\r\n    start () {\r\n        this.turnOffSoundButton.active = true;\r\n\r\n        this.audioSource = this.node.getComponent(AudioSource)!;\r\n\r\n        if(this.node.getChildByName(\"Wrong\") != undefined && this.node.getChildByName(\"Wrong\") != null)\r\n            this.ScriptableFromWrong =  this.node.getChildByName(\"Wrong\")!.getComponent(ScriptEffects)! ;\r\n\r\n\r\n        this.setPCorMobileKeyboard();\r\n    }\r\n\r\n    setPCorMobileKeyboard(){\r\n        if(GameManager.getInstance().isMobileOrTablet) {\r\n\r\n            this.node.getChildByName(\"EditBox\")!.active = true;\r\n            this.node.getChildByName(\"EditBoxPC\")!.active = false;\r\n\r\n            this.typeInputResult = this.node.getChildByName(\"EditBox\")!.getChildByName(\"Result\")!.getComponent(Label)!\r\n            \r\n\r\n        } else {\r\n            this.node.getChildByName(\"EditBox\")!.active = false;\r\n            this.node.getChildByName(\"EditBoxPC\")!.active = true;\r\n\r\n            this.typeInputResult = this.node.getChildByName(\"EditBoxPC\")!.getChildByName(\"Result\")!.getComponent(Label)!\r\n            this.editBoxPC = this.node.getChildByName(\"EditBoxPC\")!.getComponent(EditBoxComponent)!;\r\n        }\r\n    }\r\n\r\n    solveSoundActivness() {\r\n        console.log(\"Solve Sound Activness!!! \" + this.JSONtask.questionAudio);\r\n\r\n        this.soundParent = this.node.getChildByName(\"SoundButtons\")! ;\r\n        \r\n        \r\n        \r\n        if(this.JSONtask.questionAudio == undefined || this.JSONtask.questionAudio == null)\r\n            this.soundParent.active = false;\r\n        else\r\n            this.soundParent.active = true;\r\n\r\n        this.turningOff = false;\r\n    }\r\n\r\n    solveIntroTaskButton() {\r\n        this.node.getChildByName(\"GenericButton\")!.getChildByName(\"Label\")!.getComponent(Label)!.string = GlobalManager.getGlobal().goButton!;\r\n    } \r\n\r\n    soundButtonClicked(event: Event, customData: string) {\r\n        if(!this.audioSource.playing) {\r\n            this.audioSource.clip = this.JSONtask.questionAudio!;\r\n            if(this.JSONtask.questionAudio != undefined)\r\n                this.audioSource.play();\r\n        } else \r\n            this.audioSource.stop();\r\n\r\n                \r\n    }\r\n\r\n    answered(event: Event, customData: string) {\r\n        \r\n\r\n        if(this.typeInputResult?.string == this.JSONtask.tacanOdgovor)\r\n            this.rightAnwer();\r\n        else \r\n            this.wrongAnswer();\r\n        \r\n    }\r\n    rightAnwer() {\r\n        this.getComponent(Animation)?.play(\"CorrectAnswer\");\r\n        \r\n    }\r\n\r\n    rightAnwerAfterTheAnimation() {\r\n        this.corespondingTask?.getComponent(Task)?.taskCompleted();\r\n        //this.ScriptableFromWrong?.fadeOutActive();\r\n        this.clearStringFromEditBox();\r\n        this.turnOffGenericTask();\r\n        this.turningOff = true;\r\n        \r\n        \r\n    }\r\n\r\n    clearStringFromEditBox() {\r\n        this.typeInputResult!.string = \"\";\r\n\r\n        if(this.editBoxPC) \r\n            this.editBoxPC.string = \"\";\r\n    }\r\n\r\n    wrongAnswer() {\r\n        //if(!this.turningOff)\r\n        //    this.ScriptableFromWrong?.fadeInActive();\r\n\r\n        this.node.getComponent(Animation)!.play(\"WrongNudge\");\r\n\r\n        this.setRandomTask();\r\n\r\n        this.clearStringFromEditBox();\r\n        \r\n\r\n    }\r\n\r\n\r\n    turnOnGenericTask(task: Node) {\r\n        this.getComponent(Animation)?.play(\"BackToNormal\");\r\n        \r\n        this.corespondingTask = task; \r\n        GameManager.getInstance().gameStatus = GameStatuType.gamePaused; \r\n\r\n        \r\n        \r\n        this.getComponent(ScriptEffects)?.fadeInActive();\r\n\r\n        this.setRandomTask();\r\n        this.solveIntroTaskButton();\r\n        \r\n\r\n        if(GameManager.getInstance().isMobileOrTablet) {\r\n            GameManager.getInstance().inputKeyboard!.active = true;\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    setRandomTask() {\r\n        this.JSONtask = this.corespondingTask!.getComponent(TaskInput)!.getRandomTask();\r\n        this.genericTekst.getComponent(Label)!.string = this.JSONtask.question!;\r\n\r\n        this.solveSoundActivness();\r\n    }\r\n\r\n    turnOffGenericTask() {\r\n        if(this.audioSource.playing)\r\n            this.audioSource.stop();\r\n\r\n        GameManager.getInstance().gameStatus = GameStatuType.gameActive; \r\n\r\n        GameManager.getInstance().inputKeyboard!.active = false;\r\n\r\n        this.getComponent(ScriptEffects)?.fadeOutActive();\r\n        //this.ScriptableFromWrong?.fadeOutActive();\r\n    }\r\n\r\n    update() {\r\n        if(this.audioSource.playing) {\r\n            this.turnOffSoundButton.active = true;\r\n        }\r\n        else {\r\n            this.turnOffSoundButton.active = false;\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}