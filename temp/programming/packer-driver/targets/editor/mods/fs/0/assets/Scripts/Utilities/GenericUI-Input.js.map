{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Utilities/GenericUI-Input.ts"],"names":["_decorator","Component","Node","Label","AudioSource","Animation","EditBoxComponent","Task","ScriptEffects","GameManager","GameStatuType","TaskInput","ccclass","property","GenericUIinput","undefined","start","audioSource","node","getComponent","getChildByName","ScriptableFromWrong","setPCorMobileKeyboard","getInstance","isMobileOrTablet","active","typeInputResult","editBoxPC","solveSoundActivness","soundParent","JSONtask","questionAudio","turningOff","soundButtonClicked","event","customData","playOneShot","answered","string","tacanOdgovor","rightAnwer","wrongAnswer","corespondingTask","taskCompleted","clearStringFromEditBox","turnOffGenericTask","play","setRandomTask","turnOnGenericTask","task","gameStatus","gamePaused","fadeInActive","inputKeyboard","questionTemp","genericTekst","question","gameActive","fadeOutActive"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Label, EventHandler, random, AudioSource, Animation, randomRangeInt, ButtonComponent, Button, Game, EditBoxComponent} from 'cc';\r\nimport { Task } from '../Tasks/Task';\r\nimport { ScriptEffects } from './ScriptEffects';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = GenericUI\r\n * DateTime = Wed Nov 17 2021 22:41:36 GMT+0100 (Central European Standard Time)\r\n * Author = stickandrope\r\n * FileBasename = GenericUI.ts\r\n * FileBasenameNoExtension = GenericUI\r\n * URL = db://assets/Scripts/Utilities/GenericUI.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n import { JSONloader } from \"../RemoteScripts/JSONloader\";\r\n import { JSONtask2 } from \"../RemoteScripts/JSONloader\";\r\nimport { GameManager, GameStatuType } from '../GameManager';\r\nimport { TaskInput } from '../Tasks/TaskInput';\r\n \r\n@ccclass('GenericUI-Input')\r\nexport class GenericUIinput extends Component {\r\n    \r\n    JSONtask!: JSONtask2;\r\n\r\n    @property(Node)\r\n    genericTekst!: Node;\r\n\r\n    editBoxPC? : EditBoxComponent;\r\n    soundParent?: Node = undefined;\r\n\r\n    private audioSource: AudioSource = null!;\r\n\r\n    ScriptableFromWrong? : ScriptEffects;\r\n    corespondingTask? : Node;\r\n    correctAnswer? : Number;\r\n\r\n    typeInputResult? : Label;\r\n\r\n    turningOff = false;\r\n\r\n    start () {\r\n        this.audioSource = this.node.getComponent(AudioSource)!;\r\n\r\n        if(this.node.getChildByName(\"Wrong\") != undefined && this.node.getChildByName(\"Wrong\") != null)\r\n            this.ScriptableFromWrong =  this.node.getChildByName(\"Wrong\")!.getComponent(ScriptEffects)! ;\r\n\r\n\r\n        this.setPCorMobileKeyboard();\r\n    }\r\n\r\n    setPCorMobileKeyboard(){\r\n        if(GameManager.getInstance().isMobileOrTablet) {\r\n\r\n            this.node.getChildByName(\"EditBox\")!.active = true;\r\n            this.node.getChildByName(\"EditBoxPC\")!.active = false;\r\n\r\n            this.typeInputResult = this.node.getChildByName(\"EditBox\")!.getChildByName(\"Result\")!.getComponent(Label)!\r\n            \r\n\r\n        } else {\r\n            this.node.getChildByName(\"EditBox\")!.active = false;\r\n            this.node.getChildByName(\"EditBoxPC\")!.active = true;\r\n\r\n            this.typeInputResult = this.node.getChildByName(\"EditBoxPC\")!.getChildByName(\"Result\")!.getComponent(Label)!\r\n            this.editBoxPC = this.node.getChildByName(\"EditBoxPC\")!.getComponent(EditBoxComponent)!;\r\n        }\r\n    }\r\n\r\n    solveSoundActivness() {\r\n        this.soundParent = this.node.getChildByName(\"SoundButtons\")! ;\r\n\r\n        if(this.JSONtask.questionAudio == undefined || this.JSONtask.questionAudio == null)\r\n            this.soundParent.active = false;\r\n        else\r\n            this.soundParent.active = true;\r\n\r\n        this.turningOff = false;\r\n    }\r\n\r\n    soundButtonClicked(event: Event, customData: string) {\r\n                if(this.JSONtask.questionAudio != undefined)\r\n                    this.audioSource.playOneShot(this.JSONtask.questionAudio!, 1);\r\n    }\r\n\r\n    answered(event: Event, customData: string) {\r\n                    if(this.typeInputResult?.string == this.JSONtask.tacanOdgovor)\r\n                        this.rightAnwer();\r\n                    else \r\n                        this.wrongAnswer();\r\n        \r\n    }\r\n\r\n    rightAnwer() {\r\n        this.corespondingTask?.getComponent(Task)?.taskCompleted();\r\n        //this.ScriptableFromWrong?.fadeOutActive();\r\n        this.clearStringFromEditBox();\r\n        this.turnOffGenericTask();\r\n        this.turningOff = true;\r\n        \r\n        \r\n    }\r\n\r\n    clearStringFromEditBox() {\r\n        this.typeInputResult!.string = \"\";\r\n\r\n        if(this.editBoxPC) \r\n            this.editBoxPC.string = \"\";\r\n    }\r\n\r\n    wrongAnswer() {\r\n        //if(!this.turningOff)\r\n        //    this.ScriptableFromWrong?.fadeInActive();\r\n\r\n        this.node.getComponent(Animation)!.play(\"WrongNudge\");\r\n\r\n        this.setRandomTask();\r\n\r\n        this.clearStringFromEditBox();\r\n        \r\n\r\n    }\r\n\r\n\r\n    turnOnGenericTask(task: Node) {\r\n        this.corespondingTask = task; \r\n        GameManager.getInstance().gameStatus = GameStatuType.gamePaused; \r\n        \r\n        this.getComponent(ScriptEffects)?.fadeInActive();\r\n\r\n        this.setRandomTask();\r\n\r\n        if(GameManager.getInstance().isMobileOrTablet) {\r\n            GameManager.getInstance().inputKeyboard!.active = true;\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    setRandomTask() {\r\n        this.JSONtask = this.corespondingTask!.getComponent(TaskInput)!.questionTemp;\r\n        this.genericTekst.getComponent(Label)!.string = this.JSONtask.question!;\r\n\r\n        this.solveSoundActivness();\r\n    }\r\n\r\n    turnOffGenericTask() {\r\n        GameManager.getInstance().gameStatus = GameStatuType.gameActive; \r\n\r\n        GameManager.getInstance().inputKeyboard!.active = false;\r\n\r\n        this.getComponent(ScriptEffects)?.fadeOutActive();\r\n        //this.ScriptableFromWrong?.fadeOutActive();\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}