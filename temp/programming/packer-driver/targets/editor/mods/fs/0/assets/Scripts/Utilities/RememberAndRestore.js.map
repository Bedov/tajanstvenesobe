{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Utilities/RememberAndRestore.ts"],"names":["NodePosRot","_decorator","Component","Node","Vec3","Quat","RigidBody","Animation","GlobalManager","Trigger1","ccclass","property","RememberAndRestore","start","animatedObjects","getComponent","isStatic","forEach","element","nodePosRot","node","position","rotation","objectsNodePosRot","push","setActive","index","getInstance","findGeneralProgress","length","active","restart","stop","setPosition","setRotation","clearVelocity","clearForces","triggersToRestart","animationPlayed","node1func","node1","node2func","node2","node3func","node3","node4func","node4","node5func","node5"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, Vec3, Quat, RigidBody, Animation } from 'cc';\nimport { GlobalManager } from '../GlobalManager';\nimport { Trigger1 } from '../Goldberg/Trigger1';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = RememberAndRestore\n * DateTime = Thu Mar 31 2022 13:41:55 GMT+0200 (Central European Summer Time)\n * Author = stickandrope\n * FileBasename = RememberAndRestore.ts\n * FileBasenameNoExtension = RememberAndRestore\n * URL = db://assets/Scripts/Utilities/RememberAndRestore.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n \n@ccclass('RememberAndRestore')\nexport class RememberAndRestore extends Component {\n    // [1]\n    // dummy = '';\n\n    \n    @property([Node])\n    animatedObjects: Node[] = [];\n\n    @property(Node)\n    node1!: Node;\n\n    @property(Node)\n    node2!: Node;\n\n    @property(Node)\n    node3!: Node;\n\n    @property(Node)\n    node4!: Node;\n\n    @property(Node)\n    node5!: Node;\n\n    objectsNodePosRot: NodePosRot[] = [];\n        \n    @property([Trigger1])\n    triggersToRestart: Trigger1[] = [];\n\n    start () {\n        this.animatedObjects[0].getComponent(RigidBody)!.isStatic = true;\n\n        this.animatedObjects.forEach(element => {\n            var nodePosRot = new NodePosRot;\n            nodePosRot.node = element;\n            nodePosRot.position = new Vec3( element.position);\n            nodePosRot.rotation = new Quat(element.rotation) ;\n\n            \n\n            this.objectsNodePosRot.push(nodePosRot);\n\n            this.setActive();\n        });\n    }\n\n    setActive() {\n        for (let index = GlobalManager.getInstance().findGeneralProgress(); index < this.objectsNodePosRot.length; index++) {\n            this.objectsNodePosRot[index].node.active = false\n        }\n    }\n\n    restart() {\n        this.animatedObjects[0].getComponent(RigidBody)!.isStatic = false;\n\n        this.objectsNodePosRot.forEach(element => {\n            if( element.node.getComponent(Animation))\n                element.node.getComponent(Animation)?.stop();\n\n            element.node.setPosition(element.position!);\n            element.node.setRotation(element.rotation!);\n\n            if( element.node.getComponent(RigidBody)) {\n                element.node.getComponent(RigidBody)?.clearVelocity();\n                element.node.getComponent(RigidBody)?.clearForces();\n            }\n        });\n\n        this.triggersToRestart.forEach(element => {\n            element.animationPlayed = false;\n        });\n    }\n\n    node1func() {\n        this.node1.active = !this.node1.active;\n    }\n\n    node2func() {\n        this.node2.active = !this.node2.active;\n    }\n    node3func() {\n        this.node3.active = !this.node3.active;\n    }\n    node4func() {\n        this.node4.active = !this.node4.active;\n    }\n    node5func() {\n        this.node5.active = !this.node5.active;\n    }\n\n}\n\nexport class NodePosRot {\n    node!: Node;\n    position?: Vec3;\n\n    rotation? : Quat;\n\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}