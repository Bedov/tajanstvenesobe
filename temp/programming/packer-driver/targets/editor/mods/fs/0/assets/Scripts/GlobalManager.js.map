{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/GlobalManager.ts"],"names":["GeneralInformations","levelObject","_decorator","Component","Node","assetManager","Label","EditBoxComponent","Animation","sys","GameStatuType","constructor","springFest","playfullCity","easterVillage","birthdayParty","christmasVillage","medievalTown","happyStreet","backToKindergarden","undergroundChamber","invisablePeopleCity","tutorialInstroction","goButton","exitButton","inverseSettingsText","choseSpeedSettingsText","generalProgress","downloading","settingData","globalInformations","ccclass","property","GlobalManager","String","gameTutorial","getGlobal","getInstance","instance","onLoad","setPlatformType","setGeneralProgress","progress","getGeneralProgress","os","OS","ANDROID","IOS","platform","Platform","MOBILE_BROWSER","isMobileOrTablet","languageChanged","changeLanguage","LanguageName","LanguageBox","string","fetchGeneralDictionary","node","getComponent","play","remoteUrlRoot","originUrl","loadRemote","err","textAsset","parsedJSON","JSON","parse","toString","error","console","log","update","setWorldsNames","levelStatus"],"mappings":"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","sourcesContent":["export class GeneralInformations {\r\n    \r\n    springFest?: string;\r\n    playfullCity?: string;\r\n    easterVillage?: string;\r\n    birthdayParty?: string;\r\n    christmasVillage?: string;\r\n    medievalTown?: string;\r\n    happyStreet?: string;\r\n    backToKindergarden?: string;\r\n    undergroundChamber?: string;\r\n    invisablePeopleCity?: string;\r\n    tutorialInstroction?: string;\r\n\r\n    goButton?: string;\r\n    exitButton?: string;\r\n\r\n    inverseSettingsText? : string;\r\n    choseSpeedSettingsText? : string;\r\n\r\n\r\n     constructor( ) {\r\n\r\n        this.springFest = \"! Spring Fest\";\r\n        this.playfullCity =  \"! Playful City\";\r\n        this.easterVillage =  \"! Easter Village\";\r\n        this.birthdayParty =  \"! Birthday Party\";\r\n        this.christmasVillage = \"! Christmas Village\";\r\n        this.medievalTown =  \"! Medieval Town\";\r\n        this.happyStreet =  \"! Happy Street\";\r\n        this.backToKindergarden =  \"! Back To Kindergarden\";\r\n        this.undergroundChamber = \"! Underground Chamber\";\r\n        this.invisablePeopleCity =  \"! City of the invisable people\";\r\n\r\n        this.tutorialInstroction =  \"! Try to controll the player, so you can get your first task!\";\r\n\r\n        this.goButton =  \"! GO\";\r\n        this.exitButton =  \"! EXIT\";\r\n\r\n        this.inverseSettingsText =  \"! Inverse the look controls\";\r\n        this.choseSpeedSettingsText =  \"! Choose the speed of the player\";\r\n    } \r\n}\r\n\r\nvar generalProgress = 0;\r\n\r\nvar downloading = false;\r\nvar settingData = false;\r\n\r\nvar globalInformations = new GeneralInformations;\r\n\r\nimport { _decorator, Component, Node, assetManager, Label, EditBoxComponent, Animation, AffineTransform, sys } from 'cc';\r\nimport { GameStatuType } from './GameManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n \r\n@ccclass('GlobalManager')\r\nexport class GlobalManager extends Component {\r\n\r\n    static getGlobal() {\r\n        return globalInformations;\r\n    }\r\n\r\n    isMobileOrTablet : boolean = false;\r\n\r\n    invertedRotation : boolean = false;\r\n\r\n    gameStatus? : GameStatuType = GameStatuType.gameTutorial;\r\n\r\n    @property(Node)\r\n    canvas?: Node;\r\n\r\n    Progress : number = 0;\r\n\r\n    @property(String)\r\n    LanguageName?: String;\r\n\r\n    @property(Label)\r\n    springFest?: Label;\r\n    @property(Label)\r\n    playfullCity?: Label;\r\n    @property(Label)\r\n    easterVillage?: Label;\r\n    @property(Label)\r\n    birthdayParty?: Label;\r\n    @property(Label)\r\n    christmasVillage?: Label;\r\n    @property(Label)\r\n    medievalTown?: Label;\r\n    @property(Label)\r\n    happyStreet?: Label;\r\n    @property(Label)\r\n    backToKindergarden?: Label;\r\n    @property(Label)\r\n    undergroundChamber?: Label;\r\n    @property(Label)\r\n    invisablePeopleCity?: Label;\r\n\r\n    \r\n    @property(Node)\r\n    Player?: Node;\r\n\r\n\r\n    @property(EditBoxComponent)\r\n    LanguageBox?: EditBoxComponent;\r\n\r\n    public static getInstance(): GlobalManager {\r\n        if (!this.instance) {\r\n            GlobalManager.instance = new GlobalManager();\r\n            \r\n        }\r\n        return GlobalManager.instance;\r\n    }\r\n\r\n    static instance: GlobalManager;\r\n    \r\n    originUrl = \"https://abedov.com/json\"; \r\n\r\n\r\n\r\n\r\n    onLoad() {\r\n        GlobalManager.instance = this;\r\n        this.setPlatformType();\r\n    }\r\n\r\n    setGeneralProgress(progress: number) {\r\n        generalProgress = progress;\r\n    }\r\n\r\n    getGeneralProgress() {\r\n        return generalProgress;\r\n    }\r\n    \r\n    setPlatformType() {\r\n        \r\n        if(sys.os == sys.OS.ANDROID || sys.os == sys.OS.IOS || sys.platform == sys.Platform.MOBILE_BROWSER) \r\n            this.isMobileOrTablet = true;\r\n    }\r\n\r\n    languageChanged() {\r\n\r\n    }\r\n\r\n    changeLanguage() {\r\n        this.LanguageName = this.LanguageBox?.string;\r\n\r\n        if(this.LanguageBox?.string == \"SRB\" || this.LanguageBox?.string == \"ENG\" ) {\r\n            this.fetchGeneralDictionary()\r\n            this.LanguageBox?.node.getComponent(Animation)!.play(\"Approved\");\r\n        }\r\n        else \r\n            this.LanguageBox?.node.getComponent(Animation)!.play(\"WrongNudge\");\r\n        \r\n    }\r\n\r\n    fetchGeneralDictionary() {\r\n\r\n        let remoteUrlRoot = this.originUrl + \"/\" + this.LanguageName + \"/\" + \"generalinfo.txt\" ;\r\n\r\n        downloading = true;\r\n        settingData = true;\r\n\r\n        try {\r\n\r\n            assetManager.loadRemote(remoteUrlRoot, function (err, textAsset) {\r\n\r\n                try {\r\n\r\n                   var parsedJSON = JSON.parse(textAsset.toString());\r\n                \r\n                globalInformations.backToKindergarden = parsedJSON[\"backToKindergarden\"].toString()\r\n                globalInformations.birthdayParty = parsedJSON[\"birthdayParty\"].toString()\r\n                globalInformations.choseSpeedSettingsText = parsedJSON[\"choseSpeedSettingsText\"].toString()\r\n                globalInformations.christmasVillage = parsedJSON[\"christmasVillage\"].toString()\r\n                globalInformations.easterVillage = parsedJSON[\"easterVillage\"].toString()\r\n                globalInformations.exitButton = parsedJSON[\"exitButton\"].toString()\r\n                globalInformations.goButton = parsedJSON[\"goButton\"].toString()\r\n                globalInformations.happyStreet = parsedJSON[\"happyStreet\"].toString()\r\n                globalInformations.inverseSettingsText = parsedJSON[\"inverseSettingsText\"].toString()\r\n                globalInformations.invisablePeopleCity = parsedJSON[\"invisablePeopleCity\"].toString()\r\n                globalInformations.medievalTown = parsedJSON[\"medievalTown\"].toString()\r\n                globalInformations.playfullCity = parsedJSON[\"playfullCity\"].toString()\r\n                globalInformations.springFest = parsedJSON[\"springFest\"].toString()\r\n                globalInformations.tutorialInstroction = parsedJSON[\"tutorialInstroction\"].toString()\r\n                globalInformations.undergroundChamber = parsedJSON[\"undergroundChamber\"].toString()\r\n\r\n               \r\n               } catch (error) {\r\n                   console.log(\"Nisam nasao trazeno polje za parsiranje\" );\r\n                   \r\n                   return false;\r\n               }\r\n               downloading = false;\r\n           });\r\n           return true;\r\n       } catch (error) {\r\n           console.log(\"Nisam nasao trazenu adresu za parsiranje 2\" );\r\n           return false;\r\n       }\r\n\r\n       \r\n    } \r\n\r\n    update(){\r\n        if(settingData == true)\r\n            if(downloading == false) {\r\n                this.setWorldsNames();\r\n                settingData = false;\r\n            }\r\n\r\n    }\r\n\r\n    setWorldsNames() {\r\n        this.springFest!.string = globalInformations.springFest!;\r\n        this.playfullCity!.string = globalInformations.playfullCity!;\r\n        this.easterVillage!.string = globalInformations.easterVillage!;\r\n        this.birthdayParty!.string = globalInformations.birthdayParty!;\r\n        this.christmasVillage!.string = globalInformations.christmasVillage!;\r\n        this.medievalTown!.string = globalInformations.medievalTown!;\r\n        this.happyStreet!.string = globalInformations.happyStreet!;\r\n        this.backToKindergarden!.string = globalInformations.backToKindergarden!;\r\n        this.undergroundChamber!.string = globalInformations.undergroundChamber!;\r\n        this.invisablePeopleCity!.string = globalInformations.invisablePeopleCity!;\r\n    }\r\n    \r\n}\r\n\r\nexport class levelObject {\r\n    \r\n    name?: string;\r\n    ID?: number;\r\n    status? : levelStatus;\r\n\r\n}\r\n\r\nexport enum levelStatus {\r\n    locked =    0,\r\n    unlocked =   1,\r\n    finished =   2,\r\n    }\r\n\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}