{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/Tasks/TaskSimplePanelClickableObject.ts"],"names":["_decorator","JSONquestTekst","ScriptEffects","GenericUI","Task","GameManager","GlobalManager","ccclass","property","TaskSimplePanelClickableObject","String","start","schedule","isItMyTimeForDownloading","getTekstRemotely","remoteName","getInstance","jsonLoader","fetchQuestTekst","toString","tekstObject","checkExecution","isItOkToExecute","detectType","_moveTutorialEndBool","_lookTutorialEndBool","showTask","orderNumber","downloadedCheckpoint","downloadStarted","fetchTheData","taskManager","genericUI","active","getComponent","fadeInActive","turnOnGenericTaskJSONwithReturn","console","log","activeLevelData","levelProgress","execute","loadingHandler","turnOnLoading","scheduleOnce","turnOffLoading","executed","executeNextTasksByForce"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, director, macro, Collider } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\nimport { TaskManager } from \"./TaskManager\";\r\nimport { JSONquestTekst } from '../RemoteScripts/JSONloader';\r\nimport { ScriptEffects } from \"../Utilities/ScriptEffects\";\r\nimport { GenericUI } from \"../Utilities/GenericUI\";\r\nimport { Task } from './Task';\r\nimport { GameManager } from '../GameManager';\r\nimport { GlobalManager } from '../GlobalManager';\r\n\r\n@ccclass('TaskSimplePanelClickableObject')\r\nexport class TaskSimplePanelClickableObject extends Task {\r\n\r\n    @property(String)\r\n    remoteName!: String;\r\n\r\n    tekstObject: JSONquestTekst = new JSONquestTekst ;\r\n\r\n    start () {\r\n        //this.schedule(this.checkExecution, 0.1, macro.REPEAT_FOREVER);\r\n        this.schedule(this.isItMyTimeForDownloading, 0.1);\r\n\r\n    }\r\n    \r\n    getTekstRemotely() {\r\n        if(this.remoteName != \"\") {\r\n            GameManager.getInstance().jsonLoader?.fetchQuestTekst(this.remoteName.toString(), this.tekstObject)!;\r\n        }\r\n    }\r\n\r\n    \r\n    checkExecution() {\r\n        if(this.isItOkToExecute() && GameManager.getInstance().detectType?._moveTutorialEndBool && GameManager.getInstance().detectType?._lookTutorialEndBool)\r\n            this.showTask();\r\n\r\n    }\r\n    isItMyTimeForDownloading() {\r\n        if(this.orderNumber <= GameManager.getInstance().downloadedCheckpoint && !this.downloadStarted ) {\r\n            this.fetchTheData();\r\n            this.downloadStarted = true;\r\n        }\r\n            \r\n    }\r\n\r\n    fetchTheData() {\r\n            this.getTekstRemotely();\r\n    }\r\n\r\n    showTask () {\r\n        if(this.isItOkToExecute()) {\r\n            this.taskManager.genericUI!.active = true;\r\n            this.taskManager.genericUI!.getComponent(ScriptEffects)!.fadeInActive();\r\n            this.taskManager.genericUI!.getComponent(GenericUI)!.turnOnGenericTaskJSONwithReturn(this.tekstObject, this); //Čestitam! Stigao si do časovničara.\r\n        }\r\n\r\n        console.log(\"Show Task, elevator level progress = 1\");\r\n        \r\n        GlobalManager.getInstance().activeLevelData.levelProgress = 1;\r\n    }\r\n\r\n    execute() {\r\n        console.log(\"ShowTask!!!\");\r\n            if(this.isItOkToExecute()) {\r\n                if(GameManager.getInstance().downloadedCheckpoint <= this.orderNumber) {\r\n                    GameManager.getInstance().loadingHandler?.turnOnLoading();\r\n                    this.scheduleOnce(this.showTask, 0.2);\r\n                    console.log(\"DownloadedCheckpoint : \" + GameManager.getInstance().downloadedCheckpoint);\r\n        \r\n                    console.log(\"this.orderNumber : \" + this.orderNumber);\r\n                    return;\r\n                }\r\n                \r\n                GameManager.getInstance().loadingHandler?.turnOffLoading();\r\n                this.taskManager.genericUI!.active = true;\r\n                this.taskManager.genericUI!.getComponent(GenericUI)!.turnOnGenericTaskJSONwithReturn(this.tekstObject,this);\r\n\r\n            this.executed = true;\r\n            //this.taskManager.refreshExecutedTasks(this.node.parent!);\r\n\r\n        this.executeNextTasksByForce();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}