{"version":3,"sources":["file:///Users/aleksandarbedov/Documents/CocosCreator/tajanstvenesobe2/assets/Scripts/TrophiesManagment.ts"],"names":["_decorator","Component","Node","instantiate","Vec3","Animation","ParticleSystem2D","GameManager","TaskManager","ccclass","property","TrophiesManagment","type","start","trophyNode","node","children","getInstance","getComponent","checkpoints","forEach","element","newTrophy","parent","calculateLocked","index","Progress","active","Number","length","trophiePosition","worldPosition","particleEffect","setWorldPosition","play","enabled"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,gB,OAAAA,gB;;AAC3DC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;;mCAIjBW,iB,WADZF,OAAO,CAAC,mBAAD,C,UAGHC,QAAQ,CAAC;AAACE,QAAAA,IAAI,EAAEV;AAAP,OAAD,C,oCAHb,MACaS,iBADb,SACuCV,SADvC,CACiD;AAAA;AAAA;;AAAA;AAAA;;AAK7CY,QAAAA,KAAK,GAAI;AAAA;;AACL,cAAIC,UAAU,GAAG,KAAKC,IAAL,CAAUC,QAAV,CAAmB,CAAnB,CAAjB;AAEA;AAAA;AAAA,0CAAYC,WAAZ,GAA0BT,WAA1B,0GAAuCU,YAAvC;AAAA;AAAA,2HAAkEC,WAAlE,CAA8EC,OAA9E,CAAsFC,OAAO,IAAI;AAC7F,gBAAIC,SAAS,GAAGnB,WAAW,CAACW,UAAD,CAA3B;AACAQ,YAAAA,SAAS,CAACC,MAAV,GAAmB,KAAKR,IAAxB;AACH,WAHD;AAKA,eAAKS,eAAL,GARK,CAUL;AACH;;AAEDA,QAAAA,eAAe,GAAG;AACd,eAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG;AAAA;AAAA,0CAAYR,WAAZ,GAA0BS,QAAtD,EAAgED,KAAK,EAArE,EAAyE;AACrE,iBAAKV,IAAL,CAAUC,QAAV,CAAmBS,KAAnB,EAA0BT,QAA1B,CAAmC,CAAnC,EAAsCW,MAAtC,GAA+C,KAA/C;AACH;;AAED,eAAK,IAAIF,KAAK,GAAGG,MAAM,CAAC;AAAA;AAAA,0CAAYX,WAAZ,GAA0BS,QAA3B,CAAvB,EAA6DD,KAAK,GAAG,KAAKV,IAAL,CAAUC,QAAV,CAAmBa,MAAxF,EAAgGJ,KAAK,EAArG,EAAyG;AACrG,iBAAKV,IAAL,CAAUC,QAAV,CAAmBS,KAAnB,EAA0BT,QAA1B,CAAmC,CAAnC,EAAsCW,MAAtC,GAA+C,IAA/C;AACH;;AAED,cAAG;AAAA;AAAA,0CAAYV,WAAZ,GAA0BS,QAA1B,IAAsC,CAAzC,EAA6C;AAAA;;AACzC,gBAAII,eAAe,GAAG,KAAKf,IAAL,CAAUC,QAAV,CAAmBY,MAAM,CAAC;AAAA;AAAA,4CAAYX,WAAZ,GAA0BS,QAA3B,CAAzB,EAA+DK,aAArF;AACA,yCAAKC,cAAL,8EAAqBC,gBAArB,CAAsC,IAAI7B,IAAJ,CAAU0B,eAAV,CAAtC;AACA,iBAAKE,cAAL,CAAqBd,YAArB,CAAkCb,SAAlC,EAA8C6B,IAA9C;AACA,iBAAKF,cAAL,CAAqBhB,QAArB,CAA8B,CAA9B,EAAiCW,MAAjC,GAA0C,KAA1C;AAEA,iBAAKK,cAAL,CAAqBhB,QAArB,CAA8B,CAA9B,EAAiCW,MAAjC,GAA0C,IAA1C;AACA,iBAAKK,cAAL,CAAqBhB,QAArB,CAA8B,CAA9B,EAAiCE,YAAjC,CAA8CZ,gBAA9C,EAAiE6B,OAAjE,GAA2E,IAA3E;AACH;AACJ,SApC4C,CAsC7C;AACA;AACA;;;AAxC6C,O;;;;;iBAGR,I;;;AAwCzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Component, Node, instantiate, Vec3, Animation, ParticleSystem2D } from 'cc';\r\nimport { GameManager } from './GameManager';\r\nimport { TaskManager } from './Tasks/TaskManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('TrophiesManagment')\r\nexport class TrophiesManagment extends Component {\r\n    \r\n    @property({type: Node})\r\n    public particleEffect: Node | null = null;\r\n\r\n    start () {\r\n        var trophyNode = this.node.children[0];\r\n\r\n        GameManager.getInstance().TaskManager?.getComponent(TaskManager)?.checkpoints.forEach(element => {\r\n            var newTrophy = instantiate(trophyNode);\r\n            newTrophy.parent = this.node;\r\n        });\r\n\r\n        this.calculateLocked();\r\n\r\n        //GameManager.getInstance().TaskManager?.getComponent(TaskManager)?.checkpoints.length\r\n    }\r\n\r\n    calculateLocked() {\r\n        for (let index = 0; index < GameManager.getInstance().Progress; index++) {\r\n            this.node.children[index].children[0].active = false;\r\n        }\r\n\r\n        for (let index = Number(GameManager.getInstance().Progress); index < this.node.children.length; index++) {\r\n            this.node.children[index].children[0].active = true;\r\n        }\r\n\r\n        if(GameManager.getInstance().Progress != 0)  {\r\n            var trophiePosition = this.node.children[Number(GameManager.getInstance().Progress)].worldPosition;\r\n            this.particleEffect?.setWorldPosition(new Vec3( trophiePosition)) ;\r\n            this.particleEffect!.getComponent(Animation)!.play();\r\n            this.particleEffect!.children[0].active = false;\r\n\r\n            this.particleEffect!.children[0].active = true;\r\n            this.particleEffect!.children[0].getComponent(ParticleSystem2D)!.enabled = true;\r\n        }\r\n    }\r\n\r\n    // update (deltaTime: number) {\r\n    //     // [4]\r\n    // }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}